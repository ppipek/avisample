rust_celkem = denni_narust
for (i in 1:pocet_dni){
denni_narust = (1 + rychlost_rustu) * denni_narust;
rust_celkem = rust_celkem + denni_narust
print(denni_narust)
}
return(rust_celkem)
}
sireni(1000,0.045,10)
sireni <- function(pocatecni_stav, rychlost_rustu, pocet_dni)
{
denni_narust = pocatecni_stav * rychlost_rustu
rust_celkem = denni_narust
for (i in 1:pocet_dni){
denni_narust = (1 + rychlost_rustu) * denni_narust;
rust_celkem = rust_celkem + denni_narust
print(denni_narust)
}
return(rust_celkem)
}
sireni(1000,0.065,10)
sireni(1000,0.045,10)
sireni(1000,0.045,22)
sireni(1000,0.065,22)
install.packages("adspatial")
if (!requireNamespace("BiocManager", quietly = TRUE))
install.packages("BiocManager")
BiocManager::install("phyloseq"
)
start = 847643
end = 849210
for (i in start:end)
{
print(paste("MT-",i, sep=""))
}
library(ape)
read.GenBank(i)
for (i in start:end)
for (i in start:end)
{
print(paste("MT",i, sep=""))
}
read.GenBank(i)
seq <- read.GenBank(i)
clas(seq)
seq <- read.GenBank(i)
clas(seq)
class(seq)
class(seq)
print(seq)
image.DNAbin(seq)
ref <- c()
for (i in start:end)
{
ref <- c(ref, print(paste("MT",i, sep="")))
}
ref
seq <- read.GenBank(ref)
image.DNAbin(seq)
dunnock.dna <- seq
mafft(x=dunnock.dna, method="localpair", maxiterate=100,
options="--adjustdirection", exec="/usr/bin/mafft")
library(ips)
mafft(x=dunnock.dna, method="localpair", maxiterate=100,
options="--adjustdirection", exec="C:/Users/pavel/Documents/mafft-win/mafft.bat")
dunnock.mafft <- mafft(x=dunnock.dna, method="localpair", maxiterate=100,
options="--adjustdirection", exec="C:/Users/pavel/Documents/mafft-win/mafft.bat")
str(dunnock.dna)
dunnock.dna[[1]]
dunnock.dn
dunnock.dna
description(dunnock.dna)
attr(dunnock.dna, "description")
attr(dunnock.dna, "description") %>% tally()
library(dplyr)
start = 847643
attr(dunnock.dna, "description") %>% tally()
attr(dunnock.dna, "description")
attr(dunnock.dna, "sequence")
str(dunnocks.dna)
str(dunnock.dna)
as.data.frame(dunnock.dna)
DNAbin2index(dunnock.dna)
DNAbin2index(dunnock.dna)
as.data.frame(attr(dunnock.dna, "sequence"))
data.frame(desc = attr(dunnock.dna, "description"))
library(stringr)
desc = attr(dunnock.dna, "description")
str_extract(desc, "(.)")
str_extract(desc, "\(.+\)")
str_extract(desc, "[(].+[)]")
as.data.frame(gene = str_extract(desc, "[(].+[)]"))
as.data.frame(gene = str_extract(desc, "[(].+[)]"))
gene = str_extract(desc, "[(].+[)]")
gene
as.data.frame(gene)
as.data.frame(gene) %>% group_by(
gene
)
as.data.frame(gene) %>% group_by(
gene
) %>% tally()
as.data.frame(gene) %>% group_by(
gene
) %>% add_rownames()
as.data.frame(gene) %>% group_by(
gene
) %>% rownames_to_column()
gene = str_extract(desc, "[(].+[)]")
gene_df = as.data.frame(gene)
gene_df %>% add_rownames()
gene_df %>% add_rownames() %>% group_by(gene)
library(purr)
library(purrr)
gene_df %>% add_rownames() %>% group_by(gene) %>% nest()
library(purrr)
library(tidyr)
gene_df %>% add_rownames() %>% group_by(gene) %>% nest()
gene_df_list %>% add_rownames() %>% group_by(gene) %>% nest()
gene_df_list <- gene_df %>% add_rownames() %>% group_by(gene) %>% nest()
gene_df_list
gene_df_list$data
class(gene_df_list$data)
gene_df_list$data[[1]]
dunnock.mafft <- mafft(x=dunnock.dna[
gene_df_list$data[[1]]
], method="localpair", maxiterate=100,
options="--adjustdirection", exec="C:/Users/pavel/Documents/mafft-win/mafft.bat")
dunnock.mafft <- mafft(x=dunnock.dna[[gene_df_list$data[[1]]]], method="localpair", maxiterate=100,
options="--adjustdirection", exec="C:/Users/pavel/Documents/mafft-win/mafft.bat")
gene_df_list$data[[1]]
as.vector(gene_df_list$data[[1]])
tail(gene_df_list$data[[1]])
dunnock.mafft <- mafft(x=dunnock.dna[1:196], method="localpair", maxiterate=100,
options="--adjustdirection", exec="C:/Users/pavel/Documents/mafft-win/mafft.bat")
attr(dunnock.dna, "description")[1:196]
image.DNAbin(dunnock.mafft)
checkAlignment(dunnock.mafft)
dunnock.mafft.2 <- mafft(x=dunnock.dna[197:392], method="localpair", maxiterate=100,
options="--adjustdirection", exec="C:/Users/pavel/Documents/mafft-win/mafft.bat")
image.DNAbin(dunnock.mafft.2)
dev.off()
image.DNAbin(dunnock.mafft.2)
checkAlignment(dunnock.mafft.2)
source('G:/My Drive/rozvoj/vojta/dunnocks/dunnocks.r')
library(tidyverse)
library(lubridate)
library(shiny)
library(shinyWidgets)
umrti <- jsonlite::fromJSON("https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/umrti.json")
umrti_data <- umrti$data %>% mutate(datum = ymd(datum)) %>% group_by(datum,vek) %>% tally()
max_umrti_datum <- max(umrti_data$datum)
nakaza <- jsonlite::fromJSON("https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/osoby.json")
nakaza_data <- nakaza$data %>% mutate(datum = ymd(datum)) %>% group_by(datum,vek) %>% tally()
max_nakaza_datum <- max(nakaza_data$datum)
umrti %>% filter(vek < 40)
umrti %>% mutate(vek_10 = round(vek,10))
umrti_data %>% mutate(vek_10 = round(vek,10))
umrti_data %>% mutate(vek_10 = floor(vek/10)*10)
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n))
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) + ggplot(aes(x = vek_10, y = n_tot))
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_bar()
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col()
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(breaks = c(10,20,30,40,50,60,70,80,90,100))
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(breaks = c(10,20,30,40,50,60,70,80,90,100), labels = c(10,20,30,40,50,60,70,80,90,100))
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col()
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(10,20,30,40,50,60,70,80,90,100))
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100)) + xlab("")
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100)) + xlab("") + expand_limits(x = 0, y = 0)
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0)
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0)
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100), labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0)
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100), labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0) +
ylab("Celkový počet mrtvých na Covid-19")
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100), labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0) +
ylab("Celkový počet mrtvých na Covid-19") + annotate(geom = text, x = 30, y = 800, label = "Sem patří zmíněná žena")
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100), labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0) +
ylab("Celkový počet mrtvých na Covid-19") + annotate(geom = text, x = 30, y = 800, label = "Sem patří zmíněná žena")
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100), labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0) +
ylab("Celkový počet mrtvých na Covid-19") + annotate(geom = "text", x = 30, y = 800, label = "Sem patří zmíněná žena")
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100), labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0) +
ylab("Celkový počet mrtvých na Covid-19") + annotate(geom = "text", x = 30, y = 800, label = "Sem patří zmíněná žena") +
annotate("arrow",xmin = 30, xmax = 30, ymin = 200, ymax = 600)
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100), labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0) +
ylab("Celkový počet mrtvých na Covid-19") + annotate(geom = "text", x = 30, y = 800, label = "Sem patří zmíněná žena") +
annotate("segment",xmin = 30, xmax = 30, ymin = 200, ymax = 600, arrow = arrow())
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100), labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0) +
ylab("Celkový počet mrtvých na Covid-19") + annotate(geom = "text", x = 30, y = 800, label = "Sem patří zmíněná žena") +
annotate("segment",x= 30, xend = 30, y = 600, yend = 200, arrow = arrow())
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100), labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0) +
ylab("Celkový počet mrtvých na Covid-19") + annotate(geom = "text", x = 30, y = 800, label = "Sem patří zmíněná žena") +
annotate("segment",x= 30, xend = 30, y = 600, yend = 200, arrow = arrow(length = unit(0.5, "cm")))
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100), labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0) +
ylab("Celkový počet mrtvých na Covid-19") + annotate(geom = "text", x = 30, y = 800, label = "Sem patří zmíněná žena") +
annotate("segment",x= 30, xend = 30, y = 600, yend = 200, arrow = arrow(length = unit(0.5, "cm")))
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100), labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0) +
ylab("Celkový počet mrtvých na Covid-19") + annotate(geom = "text", x = 30, y = 800, label = "Sem patří zmíněná žena") +
annotate("segment",x= 30, xend = 30, y = 600, yend = 200, arrow = arrow(length = unit(0.25, "cm")))
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n))
umrti_data %>% filter(vek <=32) %>% summarize(n_tot = sum(n))
umrti_data %>% filter(vek <=32)
umrti_32 <- umrti_data %>% filter(vek <=32)
umrti_32
sum(umrti_32$n)
sum(umrti_32$n) / sum(umrti_data$n)
sum(umrti_data$n)
umrti
umrti$data %>% filter(vek <= 32, pohlavi == "F")
umrti$data %>% filter(vek <= 32, pohlavi == "M")
umrti$data %>% filter(vek <= 32, pohlavi == "Z")
nakaza
nakaza_data
nakaza_data %>% mutate(vek_10 = floor(vek/10)*10)
nakaza_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10)
nakaza_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
umrti_10 <- umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
nakaza_10 <- nakaza_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
nakaza_10 %<% left_join(umrti_10, by = "vek_10")
nakaza_10 %>% left_join(umrti_10, by = "vek_10")
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% mutate(mrtvi = n_sum.x, nakazeni = n_sum.y)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(mrtvi = n_sum.x, nakazeni = n_sum.y)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<120)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<120)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<120) %>%
mutate(smrtnost = mrtvi/nakazeni)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<120) %>%
mutate(smrtnost = mrtvi/nakazeni * 100)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<120) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost))
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<120) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_column()
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<120) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col()
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<120) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)")
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<120) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta")
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + x_scale_discrete(
labels = c("10","20","30","40","50","60","70","80","90","100","110", limits = seq(10,100,10))
)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10","20","30","40","50","60","70","80","90","100","110", limits = seq(10,100,10))
)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10","20","30","40","50","60","70","80","90","100"), limits = seq(10,100,10))
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10-20","20-30","30-40","40-49","50-59","60-69","70-79","80-89","90-99","100-109"), limits = seq(10,100,10)
)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10-20","20-30","30-40","40-49","50-59","60-69","70-79","80-89","90-99","100-109"), limits = seq(10,100,10)
) + expand_limits(y = 100)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10-20","20-30","30-40","40-49","50-59","60-69","70-79","80-89","90-99","100-109"), limits = seq(10,100,10)
) + expand_limits(y = 100) + geom_text()
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10-20","20-30","30-40","40-49","50-59","60-69","70-79","80-89","90-99","100-109"), limits = seq(10,100,10)
) + expand_limits(y = 100) + geom_text(label = smrtnost)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10-20","20-30","30-40","40-49","50-59","60-69","70-79","80-89","90-99","100-109"), limits = seq(10,100,10)
) + expand_limits(y = 100) + geom_text(aes(label = smrtnost))
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10-20","20-30","30-40","40-49","50-59","60-69","70-79","80-89","90-99","100-109"), limits = seq(10,100,10)
) + expand_limits(y = 100) + geom_text(aes(label = round(smrtnost,2)))
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10-20","20-30","30-40","40-49","50-59","60-69","70-79","80-89","90-99","100-109"), limits = seq(10,100,10)
) + expand_limits(y = 100) + geom_text(aes(label = round(smrtnost,2)), position = "nudge_y")
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10-20","20-30","30-40","40-49","50-59","60-69","70-79","80-89","90-99","100-109"), limits = seq(10,100,10)
) + expand_limits(y = 100) + geom_text(aes(label = round(smrtnost,2)), position = nudge_y)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10-20","20-30","30-40","40-49","50-59","60-69","70-79","80-89","90-99","100-109"), limits = seq(10,100,10)
) + expand_limits(y = 100) + geom_text(aes(label = round(smrtnost,2)), nudge_y = 20)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10-20","20-30","30-40","40-49","50-59","60-69","70-79","80-89","90-99","100-109"), limits = seq(10,100,10)
) + expand_limits(y = 100) + geom_text(aes(label = round(smrtnost,2)), nudge_y = 5)
nakaza_10 <- nakaza_data
nakaza_10
umrti_10 <- umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
nakaza_10 <- nakaza_data %>% filter(datum < ymd(2021-01-31)) %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10-20","20-30","30-40","40-49","50-59","60-69","70-79","80-89","90-99","100-109"), limits = seq(10,100,10)
) + expand_limits(y = 100) + geom_text(aes(label = round(smrtnost,2)), nudge_y = 5)
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110)
umrti_10 <- umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
nakaza_10 <- nakaza_data %>% filter(datum < ymd(2021-01-31)) %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
umrti_10 <- umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
nakaza_10 <- nakaza_data %>% filter(datum < ymd("2021-01-31")) %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
nakaza_10 %>% left_join(umrti_10, by = "vek_10") %>% rename(nakazeni = n_sum.x, mrtvi = n_sum.y) %>% filter(vek_10>0, vek_10<110) %>%
mutate(smrtnost = mrtvi/nakazeni * 100) %>%
ggplot(aes(x = vek_10, y = smrtnost)) + geom_col() + ylab("Smrtnost (v %)") + xlab("Vekova kohorta") + scale_x_discrete(
labels = c("10-20","20-30","30-40","40-49","50-59","60-69","70-79","80-89","90-99","100-109"), limits = seq(10,100,10)
) + expand_limits(y = 100) + geom_text(aes(label = round(smrtnost,2)), nudge_y = 5)
nakaza_10 <- nakaza_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
umrti_10 <- umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
library(tidyverse)
library(lubridate)
library(shiny)
library(shinyWidgets)
umrti <- jsonlite::fromJSON("https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/umrti.json")
umrti_data <- umrti$data %>% mutate(datum = ymd(datum)) %>% group_by(datum,vek) %>% tally()
max_umrti_datum <- max(umrti_data$datum)
nakaza <- jsonlite::fromJSON("https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/osoby.json")
nakaza_data <- nakaza$data %>% mutate(datum = ymd(datum)) %>% group_by(datum,vek) %>% tally()
max_nakaza_datum <- max(nakaza_data$datum)
nakaza_10 <- nakaza_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
umrti_10 <- umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_sum = sum(n))
umrti_data %>% mutate(vek_10 = floor(vek/10)*10) %>% group_by(vek_10) %>% summarize(n_tot = sum(n)) %>% ggplot(aes(x = vek_10, y = n_tot)) +
geom_col() + scale_x_discrete(limits = c(0,10,20,30,40,50,60,70,80,90,100), labels = c("0-9","10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-100","100+")) + xlab("Věková skupina ") + expand_limits(x = 0, y = 0) +
ylab("Celkový počet mrtvých na Covid-19") + annotate(geom = "text", x = 30, y = 800, label = "Sem patří zmíněná žena") +
annotate("segment",x= 30, xend = 30, y = 600, yend = 200, arrow = arrow(length = unit(0.25, "cm")))
# vsecky dni
start_date <- min(min(nakaza_data$datum), min(umrti_data$datum))
end_date <- max(max_nakaza_datum, max_umrti_datum)
dates <- seq(start_date,end_date, by = 'day')
# create dataframe
full_data <- expand_grid(datum = dates, vek = min(nakaza_data$vek):max(nakaza_data$vek)) %>%
# pridat umrti
full_join(umrti_data, by = c("datum", "vek")) %>%
# pridat nakazu
full_join(nakaza_data, by = c("datum","vek")) %>% rename(umrti = n.x, nakaza = n.y) %>%
# na na nulu
mutate(umrti = ifelse(is.na(umrti), 0, umrti), nakaza = ifelse(is.na(nakaza), 0, nakaza)) %>%
# chybejici data na na
mutate(umrti = ifelse(datum > max_umrti_datum, NA, umrti), nakaza = ifelse(datum > max_nakaza_datum, NA, nakaza))
ui <- fluidPage(
titlePanel("Covid - statistiky"),
sidebarLayout(
sidebarPanel(
numericInput(inputId = "min_age", value = 80, label="Minimalni vek (vcetne)", min = min(nakaza$data$vek)),
numericInput(inputId = "max_age", value = 120, label = "Maximalni vek", max = max(nakaza$data$vek)),
dateRangeInput(inputId = "date", label = "Obdobi", start = "2021-01-01", end = end_date, min = start_date, max = end_date)
),
mainPanel(
plotOutput("graph_umrti")
)
)
)
server <- function(input, output, session){
data_filtered <- reactive({
full_data %>% filter(vek >= input$min_age, vek < input$max_age) %>% mutate(datum = ymd(datum)) %>%
filter(ymd(datum) >= input$date[1], ymd(datum)<input$date[2]) %>% group_by(datum) %>% summarize(umrti_tot = sum(umrti), nakaza_tot = sum(nakaza))})
output$graph_umrti = renderPlot({
data <- data_filtered()
data  %>% ggplot(aes(x = datum, y = umrti_tot)) + geom_line() + labs(caption = paste("Zdroj dat:", umrti$source, "Aktualizovano:", umrti$modified)) +
expand_limits(y = 0) + geom_point() + ggtitle(paste("Umrti (", input$min_age, "-",input$max_age, ")", sep=""))
})
}
shinyApp(ui = ui, server = server)
start_date <- min(min(nakaza_data$datum), min(umrti_data$datum))
end_date <- max(max_nakaza_datum, max_umrti_datum)
dates <- seq(start_date,end_date, by = 'day')
# create dataframe
full_data <- expand_grid(datum = dates, vek = min(nakaza_data$vek):max(nakaza_data$vek)) %>%
# pridat umrti
full_join(umrti_data, by = c("datum", "vek")) %>%
# pridat nakazu
full_join(nakaza_data, by = c("datum","vek")) %>% rename(umrti = n.x, nakaza = n.y) %>%
# na na nulu
mutate(umrti = ifelse(is.na(umrti), 0, umrti), nakaza = ifelse(is.na(nakaza), 0, nakaza)) %>%
# chybejici data na na
mutate(umrti = ifelse(datum > max_umrti_datum, NA, umrti), nakaza = ifelse(datum > max_nakaza_datum, NA, nakaza))
ui <- fluidPage(
titlePanel("Covid - statistiky"),
sidebarLayout(
sidebarPanel(
numericRangeInput(inputId = "min_age", value = c(0,120), label="Vekove rozmezi", min = min(nakaza$data$vek), max = max(nakaza$data$vek)),
dateRangeInput(inputId = "date", label = "Obdobi", start = "2021-01-01", end = end_date, min = start_date, max = end_date)
),
mainPanel(
plotOutput("graph_umrti")
)
)
)
server <- function(input, output, session){
data_filtered <- reactive({
full_data %>% filter(vek >= input$min_age, vek < input$max_age) %>% mutate(datum = ymd(datum)) %>%
filter(ymd(datum) >= input$date[1], ymd(datum)<input$date[2]) %>% group_by(datum) %>% summarize(umrti_tot = sum(umrti), nakaza_tot = sum(nakaza))})
output$graph_umrti = renderPlot({
data <- data_filtered()
data  %>% ggplot(aes(x = datum, y = umrti_tot)) + geom_line() + labs(caption = paste("Zdroj dat:", umrti$source, "Aktualizovano:", umrti$modified)) +
expand_limits(y = 0) + geom_point() + ggtitle(paste("Umrti (", input$min_age, "-",input$max_age, ")", sep=""))
})
}
shinyApp(ui = ui, server = server)
ui <- fluidPage(
titlePanel("Covid - statistiky"),
sidebarLayout(
sidebarPanel(
numericRangeInput(inputId = "min_age", value = c(0,120), label="Vekove rozmezi", min = min(nakaza$data$vek), max = max(nakaza$data$vek)),
dateRangeInput(inputId = "date", label = "Obdobi", start = "2021-01-01", separator = " to ")
),
mainPanel(
plotOutput("graph_umrti")
)
)
)
ui
ui <- fluidPage(
titlePanel("Covid - statistiky"),
sidebarLayout(
sidebarPanel(
numericRangeInput(inputId = "min_age", value = c(0,120), label="Vekove rozmezi", separator = " to "),
dateRangeInput(inputId = "date", label = "Obdobi", start = "2021-01-01", end = end_date, min = start_date, max = end_date)
),
mainPanel(
plotOutput("graph_umrti")
)
)
)
server <- function(input, output, session){
data_filtered <- reactive({
full_data %>% filter(vek >= input$min_age, vek < input$max_age) %>% mutate(datum = ymd(datum)) %>%
filter(ymd(datum) >= input$date[1], ymd(datum)<input$date[2]) %>% group_by(datum) %>% summarize(umrti_tot = sum(umrti), nakaza_tot = sum(nakaza))})
output$graph_umrti = renderPlot({
data <- data_filtered()
data  %>% ggplot(aes(x = datum, y = umrti_tot)) + geom_line() + labs(caption = paste("Zdroj dat:", umrti$source, "Aktualizovano:", umrti$modified)) +
expand_limits(y = 0) + geom_point() + ggtitle(paste("Umrti (", input$min_age, "-",input$max_age, ")", sep=""))
})
}
shinyApp(ui = ui, server = server)
f2 %>% separate(Header, c("name_first","name_second","name_third"), sep = ";")
# nutny balicky
library(dplyr)
f2 %>% separate(Header, c("name_first","name_second","name_third"), sep = ";")
fg2 <- readFasta("fg2.fasta")
R.version
R.version.string
session()
library(aviSample)
get_sample_descriptions("KUk22jb643aOz_k20OpgGGpyBFonWCaj", taxon_common = "redstart", tissue = "blood")
library(devtools)
use_readme_rmd()
setwd("C:/Users/pavel/")
dir()
setwd("./aviSample")
setwd("aviSample")
setwd("/aviSample")
setwd("C:/Users/pavel/Documents/aviSample")
use_readme_rmd()
aviSample
use_github()
usethis::use_git_remote("origin", url = https://github.com/ppipek/avisample, overwrite = TRUE)
usethis::use_git_remote("origin", url = "https://github.com/ppipek/avisample", overwrite = TRUE)
use_github()
get_sample_descriptions("KUk22jb643aOz_k20OpgGGpyBFonWCaj", taxon_common = "redstart", tissue = "blood")
czech_warblers <- get_sample_descriptions("KUk22jb643aOz_k20OpgGGpyBFonWCaj", taxon_common = "warbler", country = "Czech Republic")
czech_warblers
czech_warblers %>% saveRDS("ćzech_warblers")
redstart_blood <- get_sample_descriptions("KUk22jb643aOz_k20OpgGGpyBFonWCaj", taxon_common = "redstart", tissue = "blood")
redstart_blood %>% saveRDS("data/redstart_blood.rds")
devtools::install_github("ppipek/avisample")
library(aviSample)
library(avisample)
